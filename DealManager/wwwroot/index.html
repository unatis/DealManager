﻿
<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Share Manager</title>
    <link rel="stylesheet" href="css/deals.css" />
</head>
<body>
    <header>
        <div class="brand">
            <div class="logo">SM</div>
            <div>
                <div style="font-weight:700">Share Manager</div>
                <div style="font-size:12px;color:var(--muted)">Manage deals safety</div>
            </div>
        </div>
        <div class="controls">
            <div id="userInfo" class="user-info">
                <span id="userNameDisplay">...</span>
            </div>
            <div class="portfolio-info">
                Cash:
                <span id="portfolioValue" class="portfolio-display">0</span>
            </div>
            <button id="newDealBtn">New Deal</button>
            <button id="logoutBtn" class="secondary">Logout</button>
            <!--<button id="importBtn" class="secondary">Import</button>
    <button id="exportBtn" class="secondary">Export</button>-->
        </div>
    </header>

    <main>
        <!-- Left: stocks list -->
        <aside class="panel">
            <h3>Stocks</h3>
            <button id="addStockBtn">Add stock</button>
            <div id="stockList" class="list">
                <div class="deal-item">
                    <div class="meta"><strong>AAPL</strong></div>
                    <div style="display:flex;align-items:center">
                        <span class="delete-icon">×</span>
                    </div>
                </div>
            </div>
            <div id="emptyStock" class="empty" style="display: none;">Нет акций</div>
        </aside>
        <!-- CENTER: only open deals (with search) -->
        <section class="panel center">
            <h3>Open deals</h3>

            <div class="filterRow" style="margin-top:8px">
                <input id="filterInput" placeholder="search" style="flex:1">
                <div style="font-size:13px;color:var(--muted);padding-left:6px">Count: <span id="openCount">0</span></div>
            </div>

            <div id="openList" class="list"></div>
            <div id="emptyOpen" class="empty" style="display:none">Нет открытых сделок — нажмите «New Deal» чтобы добавить.</div>
        </section>

        <!-- RIGHT: closed deals -->
        <aside class="panel">
            <h3>Closed deals</h3>
            <div class="small">Closed deals</div>
            <div id="closedList" class="list"></div>
            <div id="emptyClosed" class="empty" style="display:none">Нет закрытых сделок.</div>
        </aside>
    </main>

    <!-- Modal for creating/editing/viewing -->
    <div id="modal" class="modal" style="display:none">
        <div class="card">
            <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:12px">
                <strong id="modalTitle">New deal</strong>
                <div class="actions">
                    <button id="closeModal" class="secondary">Close</button>
                </div>
            </div>

            <form id="dealForm">
                <label>Deal date<input type="date" name="date" required></label>
                <label>Share name<input type="text" name="stock" required placeholder="AAPL"></label>
                <label required>Share parice<input type="text" name="share_price" placeholder=""></label>
                <label required>Share parice to buy?<input type="text" name="share_price_tobuy" placeholder=""></label>
                <label required>Shares amount to buy total<input type="text" name="amount_tobuy" placeholder=""></label>
                <label required>Shares amount to buy at stage 1<input type="text" name="amount_tobuy_stage_1" placeholder=""></label>
                <label>Shares amount to buy at stage 2<input type="text" name="amount_tobuy_stage_2" placeholder=""></label>
                <label>Shares amount to buy at stage 3<input type="text" name="amount_tobuy_stage_3" placeholder=""></label>
                <label required>What is your take profit price?<input type="text" name="take_profit" placeholder=""></label>
                <label required>What is your take profit in %?<input type="text" name="take_profit_prcnt" placeholder=""></label>
                <label required>What is your stop loss price?<input type="text" name="stop_loss_prcnt" placeholder=""></label>
                <label required>What is your stop loss in %?<input type="text" name="stop_loss" placeholder=""></label>
                <label required>What is the best price to buy the share?<input type="text" name="best_price"></label>
                <label>
                    Is this stock from your collection?
                    <select name="inCollection">
                        <option value="" selected disabled></option>
                        <option value="no">No</option>
                        <option value="yes">Yes</option>
                    </select>
                </label>
                <label required>
                    What is volatility type
                    <select name="volatility" required>
                        <option value="" selected disabled></option>
                        <option value="1">Small &lt; (around 50M per week)</option>
                        <option value="2">Average &lt; (around 100M per week)</option>
                        <option value="3">Big (around 200M per week)</option>
                    </select>
                </label>
                <label required>
                    Stock speed type
                    <select name="share_speed" required>
                        <option value="" selected disabled></option>
                        <option value="1">Slow &lt; (+/- 2%)</option>
                        <option value="2">Average &lt; (+/- 5%)</option>
                        <option value="3">Fast (+/- 10%)</option>
                    </select>
                </label>
                <label required>
                    You're afraid it will be too late?
                    <select name="fear_too_late">
                        <option value="" selected disabled></option>
                        <option value="no">No</option>
                        <option value="yes">Yes</option>
                    </select>
                </label>
                <label required>
                    You want earn big money quickly?
                    <select name="get_even">
                        <option value="" selected disabled></option>
                        <option value="no">No</option>
                        <option value="yes">Yes</option>
                    </select>
                </label>
                <label required>
                    Is this deal idea you got from other people?
                    <select name="from_others">
                        <option value="" selected disabled></option>
                        <option value="no">No</option>
                        <option value="yes">Yes</option>
                    </select>
                </label>
               
                <label required>
                    Is S&P500 in an upper trend right now on monthly timeframe?
                    <select name="sp500_up">
                        <option value="" selected disabled></option>
                        <option value="no">No</option>
                        <option value="yes">Yes</option>
                    </select>
                </label>
                <label required>
                    Is share movement synchronized with S&P500?
                    <select name="sync_sp500">
                        <option value="" selected disabled></option>
                        <option value="no">No</option>
                        <option value="yes">Yes</option>
                    </select>
                </label>
                <label required>
                    The share is in a reversal pattern?
                    <select name="reversal">
                        <option value="" selected disabled></option>
                        <option value="no">No</option>
                        <option value="yes">Yes</option>
                    </select>
                </label>
                <label required>
                    The share is in a flat pattern?
                    <select name="flatpattern">
                        <option value="" selected disabled></option>
                        <option value="no">No</option>
                        <option value="yes">Yes</option>
                    </select>
                </label>
                <label required>
                    What is the current price range position according all share history
                    <select name="price_range_pos">
                        <option value="" selected disabled></option>
                        <option value="1">Bottom</option>
                        <option value="2">Middle</option>
                        <option value="3">Highest</option>
                    </select>
                </label>
                <label required>
                    Is price stands on support line?
                    <select name="supportline">
                        <option value="" selected disabled></option>
                        <option value="no">No</option>
                        <option value="yes">Yes</option>
                    </select>
                </label>
                <label required>
                    Is price stands near resistance line?
                    <select name="resistanceline">
                        <option value="" selected disabled></option>
                        <option value="no">No</option>
                        <option value="yes">Yes</option>
                    </select>
                </label>
                <label required>Support price on week timeline<input type="text" name="support_price" placeholder=""></label>
                <label required>Resistance price on week timeline<input type="text" name="resist_price" placeholder=""></label>
                <label required>
                    What is the timeframe you make decision
                    <select name="timeframe">
                        <option value="" selected disabled></option>
                        <option>Daily</option>
                        <option>Weekly</option>
                        <option>Monthly</option>
                    </select>
                </label>
                <label required>
                    Is share monthly timeframe trand down or up?
                    <select name="monthly_dir">
                        <option value="" selected disabled></option>
                        <option>Down</option>
                        <option>Up</option>
                        <option>Flat</option>
                    </select>
                </label>
                <label required>
                    Is share weekly timeframe trand down or up?
                    <select name="weekly_dir">
                        <option value="" selected disabled></option>
                        <option>Down</option>
                        <option>Up</option>
                        <option>Flat</option>
                    </select>
                </label>

                <label required>
                    Do you buy on corrections trand?
                    <select name="correction_trand">
                        <option value="" selected disabled></option>
                        <option>No</option>
                        <option>Yes</option>
                    </select>
                </label>
                <label required>
                    Is you deal is counter trend?
                    <select name="counter_trend">
                        <option value="" selected disabled></option>
                        <option>No</option>
                        <option>Yes</option>
                    </select>
                </label>
               
                <label required>
                    Do you buy on green or red candle?
                    <select name="buy_green_sell_red">
                        <option value="" selected disabled></option>
                        <option>Red</option>
                        <option>Green</option>
                    </select>
                </label>
                <label required>
                    Is the share in flat position before up trend?
                    <select name="flat_before_up">
                        <option value="" selected disabled></option>
                        <option>No</option>
                        <option>Yes</option>
                    </select>
                </label>
                <label required>
                    Is the share in flat position before down trend?
                    <select name="flat_before_down">
                        <option value="" selected disabled></option>
                        <option>No</option>
                        <option>Yes</option>
                    </select>
                </label>
                <label required>
                    Does green candle biggest/highest than red stands before on week timeframe?
                    <select name="green_eats_red">
                        <option value="" selected disabled></option>
                        <option>No</option>
                        <option>Yes</option>
                    </select>
                </label>
                <label required class="full">Deal details description<textarea name="notes"></textarea></label>

                <div class="full" style="display:flex;justify-content:space-between;gap:8px">
                    <button type="submit">Create deal</button>
                    <div style="flex:1"></div>
                    <button id="deleteBtn" type="button" class="secondary" style="display:none">Delete</button>
                    <button id="closeDealBtn" type="button" class="secondary" style="display:none">Close deal</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Modal for adding a stock -->
    <div id="stockModal" class="modal" style="display:none">
        <div class="card">
            <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:12px">
                <strong id="stockModalTitle">Add stock</strong>
                <div class="actions">
                    <button id="closeStockModal" class="secondary">Close</button>
                </div>
            </div>

            <form id="stockForm">
                <label>
                    Ticker
                    <input type="text" name="ticker" required placeholder="AAPL">
                </label>

                <label class="full">
                    Description
                    <textarea name="desc" placeholder="Optional description"></textarea>
                </label>

                <label class="full" style="display:flex;align-items:center;gap:10px;cursor:pointer">
                    <div class="switch">
                        <span>S&P 500 member</span>
                        <input type="checkbox" name="sp500_member">
                        <span class="slider"></span>
                    </div>
                </label>
                <label class="full" style="display:flex;align-items:center;gap:10px;cursor:pointer">
                    <div class="switch">
                        <span>Average weekly volume around 200M $</span>
                        <input type="checkbox" name="averageWeekVol">
                        <span class="slider"></span>
                    </div>
                </label>

                <div style="display:flex; justify-content:center; width:100%; margin-top:8px">
                    <button type="submit">Save stock</button>
                </div>
            </form>
        </div>
    </div>



    <script src="js/deals.js"></script>
    <script src="js/stocks.js"></script>

</body>
</html>